<title>outrunner-mctrl</title><meta name="viewport"content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><style>p{margin-block:0}.viewport,body,html{width:100%;height:100%;margin:0}article,aside,footer,header,nav{margin:1px;background-color:#ccc;display:flex;text-align:center;flex-direction:column}.vbox{display:-webkit-flex;display:-moz-flex;display:-ms-flex;display:flex;-webkit-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-user-select:none;-ms-user-select:none;user-select:none}.hbox{display:-webkit-flex;display:-moz-flex;display:-ms-flex;display:flex;-webkit-flex-direction:row;-moz-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.space-between{-webkit-justify-content:space-between;-moz-justify-content:space-between;-ms-justify-content:space-between;justify-content:space-between}footer,header{height:10vh;background-color:#222;color:#fff}.main{-webkit-flex:1;-moz-flex:1;-ms-flex:1;flex:1}.flex{flex:1}.flex2{flex:2}.flex3{flex:3}.flex4{flex:4}.fixed{flex:0}.right{align-items:flex-end}.alert-box{background-color:red}.pad{padding:10px}button{height:30px}</style><script>function register(e){document.getElementById(e).addEventListener("mouseup",function(){send(e,"up")}),document.getElementById(e).addEventListener("mousedown",function(){send(e,"down")})}</script><body class="vbox viewport"><section class="main hbox space-between"><article id="lf"class="flex">Left forward</article><article id="mt"class="flex"><button onclick="connect()">Connect</button> <button onclick="disconnect()">Disconnect</button></article><article id="rf"class="flex">Right forward</article></section><section class="main hbox space-between"><article id="lb"class="flex">Left back</article><article id="status"class="flex"></article><article id="rb"class="flex">Right back</article></section><script>register("lf"),register("rf"),register("lb"),register("status"),register("rb")</script><script>function set_status(e){document.getElementById("status").innerHTML="Status: "+e}let ws=null;function connect(){let e=window.location.host;null!=localStorage.getItem("host")?e=localStorage.getItem("host"):(e=window.prompt("Please enter a IP adress",window.location.hostname),localStorage.setItem("host",e)),(ws=new WebSocket("ws://"+e+":81")).onopen=e=>{ws.send("hi"),set_status("Connected")},ws.onmessage=e=>{e=e.data.split(/:(.+)/);console.log(e),receive(e[0],e[1])}}function disconnect(){ws.close(),set_status("Disconnected"),localStorage.removeItem("host")}function send(e,t){void 0!==ws&&(console.log(">> "+e+":"+t),ws.send(e+":"+t))}function receive(e,t){console.log("<< "+e+":"+t),document.getElementById(e).innerHTML=t}</script>